<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detalles del Actor</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
      }
      .container {
        max-width: 1200px;
        margin: 20px auto;
        padding: 20px;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }
      .actor-details {
        display: flex;
        gap: 20px;
      }
      .actor-image {
        flex-shrink: 0;
        width: 250px;
      }
      .actor-image img {
        width: 100%;
        border-radius: 8px;
      }
      .actor-info {
        flex-grow: 1;
      }
      h1 {
        margin-top: 0;
      }
      .bio {
        margin-top: 20px;
      }

      .carousel-container {
        margin-top: 40px;
      }

      .carousel {
        display: flex;
        overflow-x: auto;
        gap: 20px;
        padding: 20px;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .carousel-item {
        min-width: 150px;
        background-color: white;
        padding: 10px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .carousel-item img {
        width: 100%;
        height: 220px;
        object-fit: cover;
        border-radius: 8px;
      }

      .carousel-item h3 {
        font-size: 0.9rem;
        margin-top: 10px;
        color: #333;
      }

      .carousel-item a {
        text-decoration: none;
        color: #333;
      }

      nav {
        background-color: rgba(5, 36, 116, 0.6);
        padding: 1rem;
        color: white;
      }
      nav ul {
        list-style: none;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      nav ul li {
        margin-right: 20px;
      }
      nav ul li a {
        color: white;
        text-decoration: none;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div id="navbar">
      <script>
        function loadNavbar() {
          fetch("navbar.html")
            .then((response) => response.text())
            .then((data) => {
              document.getElementById("navbar").innerHTML = data;
            })
            .catch((error) =>
              console.error("Error al cargar el navbar:", error)
            );
        }
        loadNavbar();
      </script>
    </div>

    <div id="app" class="container">
      <div v-if="actor" class="actor-details">
        <div class="actor-image">
          <img :src="getProfileImage(actor.profile_path)" :alt="actor.name" />
        </div>
        <div class="actor-info">
          <h1>{{ actor.name }}</h1>
          <p>
            <strong>Fecha de nacimiento:</strong> {{ actor.birthday ||
            'Desconocida' }}
          </p>
          <p>
            <strong>Lugar de nacimiento:</strong> {{ actor.place_of_birth ||
            'Desconocido' }}
          </p>
          <p v-if="actor.deathday">
            <strong>Fallecimiento:</strong> {{ actor.deathday }}
          </p>
          <div class="bio">
            <h2>Biograf√≠a</h2>
            <p>{{ actor.biography || 'No disponible' }}</p>
          </div>
        </div>
      </div>

      <div class="carousel-container" v-if="actorMovies.length">
        <h2>Conocido por</h2>
        <div class="carousel">
          <div
            class="carousel-item"
            v-for="movie in actorMovies"
            :key="movie.id"
          >
            <a :href="'movieDetails.html?id=' + movie.id">
              <img
                :src="getPoster(movie.poster_path)"
                :alt="movie.title || movie.name"
              />
              <h3>{{ movie.title || movie.name }}</h3>
            </a>
          </div>
        </div>
      </div>
    </div>

    <script>
      new Vue({
        el: "#app",
        data: {
          actor: null,
          actorMovies: [],
        },
        methods: {
          getActorDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const actorId = urlParams.get("id");
            const apiKey = "c163bbc2bad129ed390aa1e11cd87550";
            const url = `https://api.themoviedb.org/3/person/${actorId}?api_key=${apiKey}&language=es-ES&append_to_response=combined_credits`;

            fetch(url)
              .then((response) => response.json())
              .then((data) => {
                this.actor = data;
                this.actorMovies = data.combined_credits.cast.slice(0, 10);
              })
              .catch((error) =>
                console.error("Error al obtener detalles del actor:", error)
              );
          },
          getProfileImage(path) {
            return path
              ? `https://image.tmdb.org/t/p/w500${path}`
              : "https://via.placeholder.com/200x300";
          },
          getPoster(path) {
            return path
              ? `https://image.tmdb.org/t/p/w300${path}`
              : "https://via.placeholder.com/200x300";
          },
        },
        created() {
          this.getActorDetails();
        },
      });
    </script>
  </body>
</html>
